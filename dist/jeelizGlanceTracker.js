 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
function fa(b,d){var l=new XMLHttpRequest;l.open("GET",b,!0);l.withCredentials=!1;l.onreadystatechange=function(){4!==l.readyState||200!==l.status&&0!==l.status||d(l.responseText)};l.send()}function ha(b,d){if(0===d||"object"!==typeof b)return b;b=Object.assign({},b);d=void 0===d||-1===d?-1:d-1;for(var l in b)b[l]=ha(b[l],d);return b}
function la(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function pa(b,d){var l=d%8;return b[(d-l)/8]>>7-l&1}
function wa(b){var d=JSON.parse(b);b=d.ne;var l=d.nf,g=d.n;var r="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data);var h=r.length;d=new Uint8Array(h);for(var t=0;t<h;++t)d[t]=r.charCodeAt(t);r=new Float32Array(g);h=new Float32Array(l);t=b+l+1;for(var p=0;p<g;++p){for(var e=t*p,x=0===pa(d,e)?1:-1,y=e+1,w=1,c=0,u=y+b-1;u>=y;--u)c+=w*pa(d,u),w*=2;y=c;e=e+1+b;w=h.length;c=0;for(u=e;u<e+w;++u)h[c]=pa(d,u),++c;for(w=e=0;w<l;++w)e+=h[w]*Math.pow(2,-w-1);r[p]=0===e&&0===
y?0:x*(1+e)*Math.pow(2,1+y-Math.pow(2,b-1))}return r}
var E=function(){function b(q,m,z){m=q.createShader(m);q.shaderSource(m,z);q.compileShader(m);return q.getShaderParameter(m,q.COMPILE_STATUS)?m:!1}function d(q,m,z){m=b(q,q.VERTEX_SHADER,m);z=b(q,q.FRAGMENT_SHADER,z);q===a&&t.push(m,z);var L=q.createProgram();q.attachShader(L,m);q.attachShader(L,z);q.linkProgram(L);return L}function l(q,m){void 0===m.ia&&(m.ia="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===m.ja&&(m.ja=
["a0"]);void 0===m.ca&&(m.ca=[2]);if(void 0===m.precision||"highp"===m.precision)m.precision=w;m.id=x++;void 0!==m.Zb&&(m.Zb.forEach(function(L,C){m.h=m.h.replace(L,m.wa[C])}),m.Zb.splice(0));m.gb=0;m.ca.forEach(function(L){m.gb+=4*L});m.X=d(q,m.ia,"precision "+m.precision+" float;\n"+m.h);m.o={};m.i.forEach(function(L){m.o[L]=q.getUniformLocation(m.X,L)});m.attributes={};m.da=[];m.ja.forEach(function(L){var C=q.getAttribLocation(m.X,L);m.attributes[L]=C;m.da.push(C)});if(m.j){q.useProgram(m.X);e=
m;p=m.id;for(var z in m.j)q.uniform1i(m.o[z],m.j[z])}m.Ra=!0}function g(q){Aa.zd(J);p!==q.id&&(J.H(),p=q.id,e=q,a.useProgram(q.X),q.da.forEach(function(m){0!==m&&a.enableVertexAttribArray(m)}))}function r(q,m,z){l(q,m,z);q.useProgram(m.X);q.enableVertexAttribArray(0);p=-1;return e=m}function h(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var t=[],p=-1,e=null,x=0,y=!1,w="highp",c=["u1"],u=["u0"],A={u1:0},F={u0:0},n={u1:0,u2:1},D=
{u3:0},R={s0:h(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:c,j:A,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:n},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:c,j:A},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:n},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:c,j:A},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:c,j:A},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:F},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:F},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:c,j:A},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:A},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:A},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,j:F},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,j:F},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,j:F},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
i:u,j:F},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2}},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,j:F},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
i:u,j:F},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1}},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:A},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2}},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),j:{u14:0,
u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1}},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:c,j:A,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:A,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:A,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:n},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:n},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:D},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:D},s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],j:A,precision:"lowp"},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:A,precision:"lowp"},s37:{h:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u28","u29"],j:{u1:0,u28:1,u29:2}}},H={s38:{h:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u30"],wa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u30".split(" "),wa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},I=null,G=null,J={qa:function(){return y},u:function(){if(!y){I=ha(R,2);G=ha(H,2);w="highp";for(var q in I)l(a,I[q],q);E.set("s0");a.enableVertexAttribArray(0);y=!0}},ic:function(q){q.forEach(function(m){J.kb(m)})},kb:function(q){I[q.id]=q;l(a,q,q.id)},Ib:function(q,m,z){m||(m=q);I[m]=Object.create(G[q]);I[m].Wc=!0;G[q].wa&&G[q].wa.forEach(function(L,C){I[m].h=I[m].h.replace(new RegExp(L,"g"),z[C])});l(a,I[m],
m)},set:function(q){g(I[q])},fa:function(q){return r(q,h(),"s40")},Ya:function(q){return r(q,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Ec:function(q){return"undefined"===typeof I[q]?!1:I[q].Ra},H:function(){-1!==p&&(p=-1,e.da.forEach(function(q){0!==q&&a.disableVertexAttribArray(q)}))},$a:function(){var q=0;e.da.forEach(function(m,z){z=e.ca[z];a.vertexAttribPointer(m,z,a.FLOAT,!1,e.gb,q);q+=4*z})},Yd:function(){a.enableVertexAttribArray(0)},xa:function(){J.ya(a)},
ya:function(q){q.vertexAttribPointer(e.da[0],2,q.FLOAT,!1,8,0)},Be:function(q,m){a.uniform1i(e.o[q],m)},L:function(q,m){a.uniform1f(e.o[q],m)},ga:function(q,m,z){a.uniform2f(e.o[q],m,z)},Ce:function(q,m){a.uniform2fv(e.o[q],m)},Ad:function(q,m){a.uniform3fv(e.o[q],m)},De:function(q,m,z,L){a.uniform3f(e.o[q],m,z,L)},Ee:function(q,m,z,L,C){a.uniform4f(e.o[q],m,z,L,C)},Za:function(q,m){a.uniform4fv(e.o[q],m)},Fe:function(q,m){a.uniformMatrix2fv(e.o[q],!1,m)},Ge:function(q,m){a.uniformMatrix3fv(e.o[q],
!1,m)},He:function(q,m){a.uniformMatrix4fv(e.o[q],!1,m)},M:function(q,m){J.set(q);m.forEach(function(z){switch(z.type){case "4f":a.uniform4fv(e.o[z.name],z.value);break;case "3f":a.uniform3fv(e.o[z.name],z.value);break;case "2f":a.uniform2fv(e.o[z.name],z.value);break;case "1f":a.uniform1f(e.o[z.name],z.value);break;case "1i":a.uniform1i(e.o[z.name],z.value);break;case "mat2":a.uniformMatrix2fv(e.o[z.name],!1,z.value);break;case "mat3":a.uniformMatrix3fv(e.o[z.name],!1,z.value);break;case "mat4":a.uniformMatrix4fv(e.o[z.name],
!1,z.value)}})},ie:function(){return"lowp"},m:function(){a.disableVertexAttribArray(0);J.H();for(var q in I){var m=I[q];m.Ra&&(m.Ra=!1,a.deleteProgram(m.X));m.Wc&&delete I[q]}t.forEach(function(z){a.deleteShader(z)});t.splice(0);x=0;y=!1;e=null;p=-1}};return J}(),a=null,Ca=function(){function b(c){console.log("ERROR in ContextFF: ",c);return!1}function d(c){function u(){Ba.m();M.reset();F.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var A=document.createElement("canvas");A.setAttribute("width",5);A.setAttribute("height",5);var F=null;try{F=A.getContext("webgl2",c)}catch(n){return!1}if(!F)return!1;l(F);M.ub(F);c=M.Ha(F);if(!c.P&&!c.R)return u(),!1;c=Ba.ob(F,c);u();return c?!0:!1}function l(c){c.clearColor(0,0,0,0);c.disable(c.DEPTH_TEST);c.disable(c.BLEND);c.disable(c.DITHER);c.disable(c.STENCIL_TEST);c.disable(c.CULL_FACE);c.GENERATE_MIPMAP_HINT&&c.hint(c.GENERATE_MIPMAP_HINT,c.FASTEST);c.disable(c.SAMPLE_ALPHA_TO_COVERAGE);
c.disable(c.SAMPLE_COVERAGE);c.depthFunc(c.LEQUAL);c.clearDepth(1)}var g=null,r=null,h=null,t=null,p=null,e=!0,x=null,y=null,w={C:function(){return g.width},I:function(){return g.height},ae:function(){return g},$d:function(){return a},S:function(){return e},flush:function(){a.flush()},Hc:function(){x||(x=new Uint8Array(g.width*g.height*4));a.readPixels(0,0,g.width,g.height,a.RGBA,a.UNSIGNED_BYTE,x);return x},ce:function(){return g.toDataURL("image/jpeg")},de:function(){Q.F();r||(r=document.createElement("canvas"),
h=r.getContext("2d"));r.width=g.width;r.height=g.height;for(var c=w.Hc(),u=h.createImageData(r.width,r.height),A=r.width,F=r.height,n=u.data,D=0;D<F;++D)for(var R=F-D-1,H=0;H<A;++H){var I=4*(D*A+H),G=4*(R*A+H);n[I]=c[G];n[I+1]=c[G+1];n[I+2]=c[G+2];n[I+3]=c[G+3]}h.putImageData(u,0,0);return r.toDataURL("image/png")},be:function(c){!r&&c&&(r=document.createElement("canvas"),h=r.getContext("2d"));var u=c?r:document.createElement("canvas");u.width=g.width;u.height=g.height;(c?h:u.getContext("2d")).drawImage(g,
0,0);return u},u:function(c){c.sb&&!c.rb?g=document.getElementById(c.sb):c.rb&&(g=c.rb);g||(g=document.createElement("canvas"));g.width=c&&void 0!==c.width?c.width:512;g.height=c&&void 0!==c.height?c.height:512;"undefined"===typeof c&&(c={});void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!1);void 0===c.Qa&&(c.Qa=!0);void 0===c.antialias&&(c.antialias=!1);if(a)e=a instanceof WebGL2RenderingContext;else{e=!0;var u={antialias:c.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:c.premultipliedAlpha,
stencil:!1,depth:c.Qa};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(u.antialias=!1);var A=d(u);!A&&u.antialias&&(u.antialias=!1,A=d(u));A&&(a=g.getContext("webgl2",u));a?e=!0:((a=g.getContext("webgl",u))||(a=g.getContext("experimental-webgl",u)),e=!1)}if(!a)return b("WebGL1 and 2 are not enabled");(t=a.getExtension("WEBGL_lose_context"))&&c.gd&&(y=c.gd,g.addEventListener("webglcontextlost",y,!1));if(!M.u())return b("Not enough GL capabilities");l(a);E.u();T.u();
return Ba.ob(a,M.Gc())?!0:b("Cannot filter float textures")},nd:function(c,u,A,F,n){if(!M.rc())return a.readPixels(c,u,A,F,a.RGBA,a.UNSIGNED_BYTE,n),Promise.resolve();var D=a.PIXEL_PACK_BUFFER;null===p?(p=a.createBuffer(),a.bindBuffer(D,p),a.bufferData(D,n.byteLength,a.STREAM_READ)):a.bindBuffer(D,p);a.readPixels(c,u,A,F,a.RGBA,a.UNSIGNED_BYTE,0);var R=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();return new Promise(function(H,I){function G(){switch(a.clientWaitSync(R,0,0)){case a.TIMEOUT_EXPIRED:return;
case a.WAIT_FAILED:null!==J&&clearInterval(J);I();return;default:null!==J&&clearInterval(J),a.deleteSync(R),a.getBufferSubData(D,0,n),a.bindBuffer(D,null),H()}return!0}var J=null;G()||(J=setInterval(G,0))})},m:function(){a&&(M.m(),Ba.m());t&&y&&(g.removeEventListener("webglcontextlost",y,!1),t=y=null);null!==p&&(a.deleteBuffer(p),p=null);a=x=h=r=g=null}};return w}(),Aa=function(){function b(){null===d&&("undefined"!==typeof E?d=E:"undefined"!==typeof JEShaders&&(d=JEShaders))}var d=null;b();return{zd:function(l){d!==
l&&(d&&d.H(),d=l)},qa:function(){return d.qa()},xa:function(){return d.xa()},ya:function(l){return d.ya(l)},$a:function(){return d.$a()},H:function(){return d.H()},set:function(l){return d.set(l)},fa:function(l){b();return d.fa(l)},Ya:function(l){b();return d.Ya(l)},m:function(){return d.m()}}}(),W=function(){function b(k){a.bindTexture(a.TEXTURE_2D,k)}function d(k){m[0]=k;k=z[0];var K=k>>16&32768,v=k>>12&2047,f=k>>23&255;return 103>f?K:142<f?K|31744|((255==f?0:1)&&k&8388607):113>f?(v|=2048,K|(v>>
114-f)+(v>>113-f&1)):K=(K|f-112<<10|v>>1)+(v&1)}function l(k){var K=new Uint16Array(k.length);k.forEach(function(v,f){K[f]=d(v)});return K}function g(){if(null!==L.Na)return L.Na;var k=h(l([.5,.5,.5,.5]));return null===k?!0:L.Na=k}function r(){if(null!==L.Oa)return L.Oa;var k=h(new Uint8Array([127,127,127,127]));return null===k?!0:L.Oa=k}function h(k){if(!Aa.qa()||!F)return null;var K=null,v=Math.sqrt(k.length/4);try{var f=a.getError();if("FUCKING_BIG_ERROR"===f)return!1;K=C.instance({isFloat:!1,
D:!0,array:k,width:v});f=a.getError();if(f!==a.NO_ERROR)return!1}catch(ca){return!1}Q.F();a.viewport(0,0,v,v);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Aa.set("s0");K.lb(0);T.l(!0,!0);k=4*v*v;f=new Uint8Array(k);a.readPixels(0,0,v,v,a.RGBA,a.UNSIGNED_BYTE,f);v=!0;for(var U=0;U<k;++U)v=v&&3>Math.abs(f[U]-127);K.remove();Q.V();return v}var t=0,p=null,e=0,x=null,y=null,w=null,c=null,u=null,A=null,F=!1,n=[],D={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,
isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,B:null,Hb:null,Vc:!1,D:!1,W:null,sa:4,Sa:0},R=!1,H=null,I=null,G=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],J=!1,q=!1,m=new Float32Array(1),z=new Int32Array(m.buffer),L={Na:null,Oa:null},C={u:function(){F||(u=[a.RGB,null,a.RGB,a.RGBA],A=[a.RGB,null,a.RGB,a.RGBA],p=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7],J="undefined"!==typeof JEContext,q="undefined"!==
typeof M,J&&JEContext.we()&&p.push(a.TEXTURE8,a.TEXTURE9),x=[-1,-1,-1,-1,-1,-1,-1,-1],c=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT],F=!0)},Pc:function(){if(!y){for(var k=new Float32Array(16384),K=0;16384>K;++K)k[K]=2*Math.random()-1;y={random:C.instance({isFloat:!0,isPot:!0,array:k,width:64}),ec:C.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}C.Kd()},oe:function(){return y.ec},Kd:function(){c[1]=M.Ka(a)},ud:function(){A=u=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},ye:function(k,K){E.set("s1");
Q.F();var v=k.C(),f=k.I();a.viewport(0,0,v,f);k.g(0);T.l(!1,!1);a.readPixels(0,0,v,f,a.RGBA,a.UNSIGNED_BYTE,K)},Bb:function(k,K,v,f,U,ca,ma){k.activeTexture(k.TEXTURE0);var da=k.createTexture();k.bindTexture(k.TEXTURE_2D,da);U=U instanceof Float32Array?U:new Float32Array(U);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,
k.NEAREST);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,ca);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,v,f,0,k.RGBA,k.FLOAT,U);k.bindTexture(k.TEXTURE_2D,null);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);ma&&(Q.V(),E.fa(k));k.viewport(0,0,v,f);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,K,0);k.bindTexture(k.TEXTURE_2D,da);ma?T.l(!0,!0):T.na(k);k.deleteTexture(da);F&&(x[0]=-1,w=null,t=0)},Ba:function(k){k!==t&&(a.activeTexture(p[k]),t=k)},instance:function(k){function K(B){var N=a.getError();
if("FUCKING_BIG_ERROR"===N)return!1;a.texImage2D(a.TEXTURE_2D,0,Z,Y,aa,B);N=a.getError();N!==a.NO_ERROR&&Y!==a.RGBA&&(Y=a.RGBA,a.texImage2D(a.TEXTURE_2D,0,Z,Y,aa,B));return!0}function v(){if(!Ga){b(ea);ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ia);f.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,f.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,f.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));f.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.ee().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Md);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,f.isLinear?a.LINEAR:a.NEAREST);f.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,f.isMipmap&&!qa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,f.isMipmap&&!qa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Y=u[f.sa-1];Z=A[f.sa-1];aa=
c[ca];if(M.S()){var B=M.Ic();Y===a.RGBA&&aa===a.FLOAT?f.isMipmap||f.isLinear?Z=Ba.Kc(a):M.pb()?B&&(Z=B):Z=a.RGBA16F||a.RGBA:Y===a.RGB&&aa===a.FLOAT&&B&&(Z=B,Y=a.RGBA)}if(f.D&&!f.isFloat||f.isFloat&&f.isMipmap&&Ba.$c())Z=M.Jc(),aa=M.Ka(a);f.Sa&&(xa=f.Sa);f.isSrgb&&4===f.sa&&(Y=JEContext.le());if(f.B)K(f.B);else if(f.url)K(oa);else if(ja){B=ja;try{"FUCKING_BIG_ERROR"!==a.getError()&&(a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,B),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,null),
a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,O,P,0,a.RGBA,a.UNSIGNED_BYTE,null)))}catch(kb){a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,null)}f.isKeepArray||(ja=null)}else B=a.getError(),"FUCKING_BIG_ERROR"!==B&&(a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,null),B=a.getError(),B!==a.NO_ERROR&&(Y=a.RGBA,f.D&&aa!==a.FLOAT&&(aa=a.FLOAT,a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,null))));if(f.isMipmap)if(!qa&&V)V.Ja(),ya=!0;else if(qa){B=Math.log2(Math.min(O,P));ta=Array(1+B);ta[0]=ea;for(var N=
1;N<=B;++N){var ba=Math.pow(2,N),S=O/ba;ba=P/ba;var ra=a.createTexture();b(ra);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,Z,S,ba,0,Y,aa,null);b(null);ta[N]=ra}ya=!0}b(null);x[t]=-1;ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);ua=!0;f.W&&V&&(f.W(V),f.W=null)}}var f=Object.assign({},D,k),U=e++;null===f.isFlipY&&(f.isFlipY=f.url||f.array?!0:!1);f.data&&(f.array="string"===typeof f.data?wa(f.data):
f.isFloat?new Float32Array(f.data):new Uint8Array(f.data),f.isFlipY=!1);var ca=0,ma=f.B?!0:!1,da=null,Da=null,Ha=!1,Ea=null;f.D=f.D||f.isFloat;f.D&&(ca=1);!f.Vc&&f.isFloat&&q&&!M.pb()&&(f.isFloat=!1);f.isFloat&&(ca=2);f.isAnisotropicFiltering&&J&&!JEContext.re()&&(f.isAnisotropicFiltering=!1);var ea=f.Hb||a.createTexture(),oa=null,ja=!1,O=0,P=0,ua=!1,Ga=!1,za=!1,ka=null,na=null,Fa=null,va=null,Z=null,Y=null,aa=null,ia=f.isFlipY,Va=(k=f.D&&f.isMipmap)&&Ba.qc(),qa=k&&Va?!0:!1,ta=null,xa=-1,ya=!1,sa=
{Ob:!1,mb:null,Cb:null};f.width&&(O=f.width,P=f.height?f.height:O);var V={get:function(){return ea},C:function(){return O},I:function(){return P},pe:function(){return f.url},se:function(){return f.isFloat},ue:function(){return f.D},ve:function(){return f.isLinear},Ja:function(){a.generateMipmap(a.TEXTURE_2D)},nc:function(B,N){qa?(B||(B=V.Fb()),C.Ba(N),b(ta[B]),x[N]=-1):V.g(N)},Fb:function(){-1===xa&&(xa=Math.log(O)/Math.log(2));return xa},Fc:function(B){if(qa){B||(B=V.Fb());E.set("s11");C.Ba(0);for(var N=
O,ba=P,S=1;S<=B;++S)N/=2,ba/=2,E.ga("u7",.25/N,.25/ba),a.viewport(0,0,N,ba),b(ta[S-1]),a.framebufferTexture2D(Q.pa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ta[S],0),T.l(!1,1===S);x[0]=-1}else V.Ja()},g:function(B){if(!ua)return!1;C.Ba(B);if(x[B]===U)return!1;b(ea);x[B]=U;return!0},lb:function(B){a.activeTexture(p[B]);t=B;b(ea);x[B]=U},s:function(){w=V;a.framebufferTexture2D(Q.pa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ea,0)},K:function(){w=V;a.viewport(0,0,O,P);a.framebufferTexture2D(Q.pa(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,ea,0)},fb:C.fb,resize:function(B,N){O=B;P=N;v()},clone:function(B){B=C.instance({width:O,height:P,D:f.D,isFloat:f.isFloat,isLinear:f.isLinear,isMirrorY:f.isMirrorY,isFlipY:B?!ia:ia,isPot:f.isPot});Aa.set("s0");Q.V();B.s();a.viewport(0,0,O,P);V.g(0);T.l(!0,!0);return B},Cd:function(){a.viewport(0,0,O,P)},remove:function(){a.deleteTexture(ea);Ga=!0;n.splice(n.indexOf(V),1);V=null},refresh:function(){V.lb(0);ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);ma?a.texImage2D(a.TEXTURE_2D,0,Z,Y,
a.UNSIGNED_BYTE,f.B):a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,ja);ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},qb:function(){var B=O*P*4;na=[new Uint8Array(B),new Uint8Array(B),new Uint8Array(B),new Uint8Array(B)];ka=[new Float32Array(na[0].buffer),new Float32Array(na[1].buffer),new Float32Array(na[2].buffer),new Float32Array(na[3].buffer)];Fa=new Uint8Array(4*B);va=new Float32Array(Fa.buffer);za=!0},Wb:function(){za||V.qb();a.readPixels(0,0,O,4*P,a.RGBA,a.UNSIGNED_BYTE,Fa);for(var B=O*P,N=2*B,ba=
3*B,S=0;S<B;++S)ka[0][S]=va[S],ka[1][S]=va[S+B],ka[2][S]=va[S+N],ka[3][S]=va[S+ba];return ka},md:function(){sa.Ob||(sa.mb=new Uint8Array(O*P*4),sa.Cb=new Float32Array(sa.buffer),sa.Ob=!0);a.readPixels(0,0,O,P,a.RGBA,a.UNSIGNED_BYTE,sa.mb);return sa.Cb},tb:function(B){Q.F();E.set("s12");V.g(0);if(B)a.viewport(0,0,O,P),E.Za("u8",.25,.25,.25,.25),T.l(!1,!0);else for(B=0;4>B;++B)a.viewport(0,P*B,O,P),E.Za("u8",G[B]),T.l(!1,0===B)},Ke:function(B){var N=aa===c[0]&&!r();b(ea);ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!0);N?(Ha||(da=document.createElement("canvas"),da.width=O,da.height=P,Da=da.getContext("2d"),Ea=Da.createImageData(O,P),Ha=!0),Ea.data.set(B),Da.putImageData(Ea,0,0),a.texImage2D(a.TEXTURE_2D,0,Z,Y,aa,da)):a.texImage2D(a.TEXTURE_2D,0,Z,O,P,0,Y,aa,B);x[t]=U;ia&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Le:function(B,N){b(ea);N&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,Z,Y,aa,B);x[t]=U;N&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ae:function(B,N){var ba=O*P,S=4*ba;B=f.D?B?
"RGBE":"JSON":"RGBA";N&&(B=N);N=M.S()&&!1;var ra=null;switch(B){case "RGBE":ra="s42";break;case "JSON":ra=N?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ra="s6"}za||("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B?(na=new Uint8Array(S),za=!0):"JSON"!==B||N||V.qb());Q.F();E.set(ra);V.g(0);S=null;if("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B){a.viewport(0,0,O,P);T.l(!0,!0);a.readPixels(0,0,O,P,a.RGBA,a.UNSIGNED_BYTE,na);if("RGBAARRAY"===B)return{data:na};R||(H=document.createElement("canvas"),I=H.getContext("2d"),
R=!0);H.width=O;H.height=P;ba=I.createImageData(O,P);ba.data.set(na);I.putImageData(ba,0,0);S=H.toDataURL("image/png")}else if("JSON"===B)if(N)S=new Float32Array(ba),a.viewport(0,0,O,P),T.l(!0,!0),a.readPixels(0,0,O,P,a.RGBA,a.FLOAT,S);else{for(S=0;4>S;++S)a.viewport(0,P*S,O,P),E.Za("u8",G[S]),T.l(!S,!S);V.Wb();S=Array(ba);for(N=0;N<ba;++N)S[4*N]=ka[0][N],S[4*N+1]=ka[1][N],S[4*N+2]=ka[2][N],S[4*N+3]=ka[3][N]}return{format:B,data:S,width:O,height:P,isMirrorY:f.isMirrorY,isFlipY:"RGBA"===B?f.isFlipY:
!f.isFlipY}}};f.isMipmap&&!qa&&ua&&!ya&&(V.Ja(),ya=!0);if(f.url)b(ea),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),oa=new Image,oa.Ud="Anonymous",oa.crossOrigin="Anonymous",oa.src=f.url,oa.onload=function(){O=oa.width;P=oa.height;v()};else if(f.B){var Ia=function(){O=void 0!==f.B.videoWidth?f.B.videoWidth:f.B.width;P=void 0!==f.B.videoHeight?f.B.videoHeight:f.B.height;O?v():setTimeout(Ia,1)};Ia()}else f.array?(f.D&&!f.isFloat?f.array instanceof Uint16Array?(ja=f.array,v()):
g()?(ja=l(f.array),v()):(v(),C.Bb(a,ea,V.C(),V.I(),f.array,ia,!0)):(ja=f.isFloat?f.array instanceof Float32Array?f.array:new Float32Array(f.array):f.array instanceof Uint8Array?f.array:new Uint8Array(f.array),v()),f.isKeepArray||(ja&&ja!==f.array&&(ja=null),delete f.array)):f.Hb?ua=!0:v();V.ke=V.C;f.W&&ua&&(f.W(V),f.W=null);n.push(V);return V},F:function(k){k!==t&&(a.activeTexture(p[k]),t=k);x[k]=-1;b(null)},Pd:function(k){y.random.g(k)},fb:function(){w=null;a.framebufferTexture2D(Q.pa(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,null,0)},reset:function(){0!==t&&a.activeTexture(p[0]);for(var k=0;k<p.length;++k)x[k]=-1;t=-1},ze:function(){t=-1},Id:function(){for(var k=0;k<p.length;++k)C.F(k)},Db:function(){y&&(y.random.remove(),y.ec.remove())},Je:function(k,K){if("RGBA"===k.format||"RGBE"===k.format){var v=new Image;v.src=k.data;v.onload=function(){C.instance({isMirrorY:k.isMirrorY,isFlipY:k.isFlipY,isFloat:!1,B:v,W:function(f){if("RGBA"===k.format)K(f);else{var U=k.width,ca=k.height,ma=C.instance({isMirrorY:k.isMirrorY,
isFloat:!0,width:U,height:ca,isFlipY:k.isFlipY});Q.V();a.viewport(0,0,U,ca);E.set("s43");ma.s();f.g(0);T.l(!0,!0);C.F(0);K(ma);a.flush();setTimeout(f.remove,50)}}})}}else"JSON"===k.format?K(C.instance({isFloat:!0,isFlipY:k.isFlipY,width:k.width,height:k.height,array:new Float32Array(k.data)})):K(!1)},tc:l,m:function(){w&&(Q.V(),C.fb(),Q.F());C.Id();n.slice(0).forEach(function(k){k.remove()});n.splice(0);F=!1;e=0;"undefined"!==typeof Ba&&Ba.m();y=null}};return C}(),Ja={instance:function(b){var d=[W.instance(b),
W.instance(b)],l=[d[1],d[0]],g=l,r={wd:function(h){g[1].s();g[0].g(h);r.cc()},xd:function(h){g[1].K();g[0].g(h);r.cc()},cc:function(){g=g===d?l:d},refresh:function(){g[0].refresh();g[1].refresh()},g:function(h){g[0].g(h)},Od:function(h){g[1].g(h)},he:function(){return g[0]},remove:function(){g[0].remove();g[1].remove();g=null}};return r}},T=function(){function b(e){var x={O:null,A:null};x.O=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,x.O);e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,
-1,3]),e.STATIC_DRAW);x.A=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,x.A);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),e.STATIC_DRAW);return x}var d=null,l=0,g=!1,r=[],h=-2,t=-2,p={reset:function(){t=h=-2},u:function(){g||(d=b(a),p.Ca(),g=!0)},instance:function(e){var x=l++,y=e.A?e.A.length:0,w="undefined"===typeof e.mode?a.STATIC_DRAW:e.mode,c=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,e.O instanceof Float32Array?e.O:new Float32Array(e.O),
w);h=x;var u=null,A=null,F=null;if(e.A){u=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,u);var n=null;65536>e.A.length?(n=Uint16Array,A=a.UNSIGNED_SHORT,F=2):(n=Uint32Array,A=a.UNSIGNED_INT,F=4);n=e.A instanceof n?e.A:new n(e.A);a.bufferData(a.ELEMENT_ARRAY_BUFFER,n,w);t=x}var D={oc:function(R){h!==x&&(a.bindBuffer(a.ARRAY_BUFFER,c),h=x);R&&Aa.$a()},lc:function(){t!==x&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,u),t=x)},bind:function(R){D.oc(R);D.lc()},Wd:function(){a.drawElements(a.TRIANGLES,y,
A,0)},Xd:function(R,H){a.drawElements(a.TRIANGLES,R,A,H*F)},remove:function(){a.deleteBuffer(c);e.A&&a.deleteBuffer(u);D=null}};r.push(D);return D},Ca:function(){-1!==h&&(a.bindBuffer(a.ARRAY_BUFFER,d.O),h=-1);-1!==t&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d.A),t=-1)},l:function(e,x){e&&T.Ca();x&&Aa.xa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},na:function(e){e=e||a;var x=b(e);e.bindBuffer(e.ARRAY_BUFFER,x.O);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,x.A);Aa.ya(e);e.clear(e.COLOR_BUFFER_BIT);e.drawElements(e.TRIANGLES,
3,e.UNSIGNED_SHORT,0);e.flush();e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.deleteBuffer(x.O);e.deleteBuffer(x.A);p.reset();g&&(p.Ca(),Aa.xa())},Db:function(){var e=a,x=d;e.deleteBuffer(x.O);e.deleteBuffer(x.A)},m:function(){p.Db();r.forEach(function(e){e.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);p.reset();g=!1;r.splice(0);l=0}};return p}(),Q=function(){var b=null,d=null,l=null,g=!1,r=[],h={v:-2,Ab:1},t={qa:function(){return g},
u:function(){if(!g){b=a.createFramebuffer();var p=M.S();d=p&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;l=p&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;g=!0}},fe:function(){return d},Lc:function(){return l},pa:function(){return a.FRAMEBUFFER},je:function(){return h},Zd:function(){return b},instance:function(p){void 0===p.Lb&&(p.Lb=!1);var e=p.aa?p.aa:null,x=p.width,y=void 0!==p.height?p.height:p.width,w=b,c=null,u=!1,A=!1,F=0;e&&(x=x?x:e.C(),y=y?y:e.I());var n={bc:function(){u||
(w=a.createFramebuffer(),u=!0,F=h.Ab++)},hc:function(){n.bc();n.s();c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,x,y);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,c);a.clearDepth(1)},bind:function(D,R){F!==h.v&&(a.bindFramebuffer(d,w),h.v=F);e&&e.s();R&&a.viewport(0,0,x,y);D&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Nd:function(){F!==h.v&&(a.bindFramebuffer(d,w),h.v=F)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|
a.DEPTH_BUFFER_BIT)},Sd:function(){a.clear(a.COLOR_BUFFER_BIT)},Td:function(){a.clear(a.DEPTH_BUFFER_BIT)},Cd:function(){a.viewport(0,0,x,y)},s:function(){F!==h.v&&(a.bindFramebuffer(d,w),h.v=F)},rtt:function(D){e=D;h.v!==F&&(a.bindFramebuffer(a.FRAMEBUFFER,w),h.v=F);D.s()},F:function(){a.bindFramebuffer(d,null);h.v=-1},resize:function(D,R){x=D;y=R;c&&(a.bindRenderbuffer(a.RENDERBUFFER,c),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,x,y))},remove:function(){w===b||A||(a.bindFramebuffer(d,
w),a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),c&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(d,null),a.deleteFramebuffer(w),c&&a.deleteRenderbuffer(c));A=!0}};p.Lb&&n.hc();r.push(n);return n},F:function(){a.bindFramebuffer(d,null);h.v=-1},Jd:function(){a.bindFramebuffer(d,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,M.C(),M.I());h.v=-1},reset:function(){h.v=-2},V:function(){0!==h.v&&(a.bindFramebuffer(d,b),h.v=
0)},clear:function(){a.viewport(0,0,M.C(),M.I());a.clear(a.COLOR_BUFFER_BIT)},m:function(){t.F();r.forEach(function(p){p.remove()});a.deleteFramebuffer(b);t.reset();g=!1;r.splice(0);h.v=-2;h.Ab=1}};return t}(),M=function(){function b(){l="undefined"===typeof Ca?JEContext:Ca;g=!0}function d(c,u){for(var A=0;A<c.length;++A){var F=u.getExtension(c[A]);if(F)return F}return null}var l=null,g=!1,r={Mb:!1,ab:null,bb:null,Pb:!1,Yc:!1,cb:null,Qb:!1,eb:null,Nb:!1,Da:null,Sc:!1,Ea:null,Tc:!1},h=null,t={P:!0,
R:!0,Ia:!0,Vb:!1},p=null,e=null,x=null,y="undefined"===typeof window?{}:window,w={u:function(){if(g)return!0;w.reset();g||b();var c=a;if(!h.Mb){h.ab=w.xb(c);y.GL_EXT_FLOAT=h.ab;h.Pb=h.ab?!0:!1;if(h.Pb||w.S())h.bb=w.yb(c),h.Yc=h.bb?!0:!1,y.GL_EXT_FLOATLINEAR=h.bb;h.Mb=!0}if(!h.Nb){h.cb=w.ma(c);h.cb&&(h.Qb=!0,y.GL_EXT_HALFFLOAT=h.cb);if(h.Qb||w.S())h.eb=w.zb(c),y.GL_EXT_HALFFLOATLINEAR=h.eb;h.qe=h.eb?!0:!1;h.Nb=!0}h.Da=w.vb(c);h.Sc=h.Da?!0:!1;y.GL_EXT_COLORBUFFERFLOAT=h.Da;h.Ea=w.wb(c);h.Tc=h.Ea?!0:
!1;y.GL_EXT_COLORBUFFERHALFFLOAT=h.Ea;Q.u();W.u();if(!w.zc())return!1;T.u();W.Pc();return!0},reset:function(){h=Object.assign({},r);p=Object.assign({},t)},C:function(){g||b();return l.C()},I:function(){g||b();return l.I()},S:function(){g||b();return l.S()},ub:function(c){w.vb(c);w.wb(c);w.xb(c);w.yb(c);w.ma(c);w.zb(c)},vb:d.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),wb:d.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),
xb:d.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),yb:d.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),ma:d.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),zb:d.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Ka:function(c){var u=w.ma(c);return u&&u.HALF_FLOAT_OES?u.HALF_FLOAT_OES:
c.HALF_FLOAT||c.FLOAT},Ic:function(){return x||a.RGBA32F||a.RGBA},Jc:function(){return e||a.RGBA16F||a.RGBA},Gc:function(){return p},pb:function(){return p.P},Rd:function(){return p.R},Qd:function(){return p.Ia},rc:function(){return p.Vb},za:function(c,u,A){function F(){c.bindTexture(c.TEXTURE_2D,null);c.bindFramebuffer(n,null);c.deleteTexture(H);c.deleteFramebuffer(R)}var n=c.FRAMEBUFFER,D=c.NEAREST,R=c.createFramebuffer();c.bindFramebuffer(n,R);var H=c.createTexture();c.activeTexture(c.TEXTURE0);
c.bindTexture(c.TEXTURE_2D,H);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,D);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,D);c.texImage2D(c.TEXTURE_2D,0,u,3,3,0,c.RGBA,A,null);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,H,0);if(c.checkFramebufferStatus(c.READ_FRAMEBUFFER||c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE)return F(),
!1;Aa.Ya(c);c.clearColor(0,0,0,0);c.viewport(0,0,3,3);c.disable(c.DEPTH_TEST);c.clear(c.COLOR_BUFFER_BIT);T.na(c);c.bindFramebuffer(n,null);Aa.fa(c);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,H);T.na(c);u=new Uint8Array(36);c.readPixels(0,0,3,3,c.RGBA,c.UNSIGNED_BYTE,u);F();for(A=0;36>A;++A)if(3<Math.abs(u[A]-127))return!1;return!0},Ha:function(c){var u={P:!1,R:!1};c.disable(c.BLEND);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);c.RGBA32F&&w.za(c,c.RGBA32F,c.FLOAT)&&(u.P=!0,x=c.RGBA32F);
!u.P&&w.za(c,c.RGBA,c.FLOAT)&&(u.P=!0,x=c.RGBA);var A=w.Ka(c);e=null;c.RGBA16F&&w.za(c,c.RGBA16F,A)&&(u.R=!0,e=c.RGBA16F);!u.R&&w.za(c,c.RGBA,A)&&(u.R=!0,e=c.RGBA);return u},Ac:function(){var c=Q.instance({width:2});c.bc();var u=W.instance({width:2,isFloat:!0,sa:3});c.s();u.s();a.flush();a.checkFramebufferStatus(Q.Lc())!==a.FRAMEBUFFER_COMPLETE?(W.ud(),p.Ia=!1):p.Ia=!0;c.remove();u.remove()},Bc:function(){var c=!1;w.S()&&(c="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(u){return"undefined"!==
typeof a[u]}));p.Vb=c},zc:function(){var c=w.Ha(a);Object.assign(p,c);if(!p.P&&!p.R)return!1;w.Ac();w.Bc();return!0},m:function(){W.m();Aa.m();Q.m();T.m();g=!1}};return w}(),Ba=function(){function b(G,J,q,m){n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,m?n.NEAREST_MIPMAP_NEAREST:n.LINEAR);var z=null;if(null!==q)try{z=n.getError();if("FUCKING_BIG_ERROR"===z)return!1;n.texImage2D(n.TEXTURE_2D,0,G,4,4,0,n.RGBA,J,q);z=n.getError();if(z!==n.NO_ERROR)return!1}catch(L){return!1}m&&n.generateMipmap(n.TEXTURE_2D);
n.clear(n.COLOR_BUFFER_BIT);T.na(n);z=n.getError();if("FUCKING_BIG_ERROR"===z)return!1;n.readPixels(0,0,2,2,n.RGBA,n.UNSIGNED_BYTE,y);z=n.getError();z===n.INVALID_OPERATION&&"undefined"!==typeof n.PIXEL_PACK_BUFFER&&(n.bindBuffer(n.PIXEL_PACK_BUFFER,null),n.readPixels(0,0,2,2,n.RGBA,n.UNSIGNED_BYTE,y),z=n.getError());if(z!==n.NO_ERROR)return!1;q=!0;for(m=0;16>m;++m)q=q&&4>Math.abs(y[m]-127);q&&(e.Ub=J,e.Kb=G);return q}function d(G,J){return D.P&&b(G,n.FLOAT,new Float32Array(w),J)?(p=t.jb,!0):!1}function l(G,
J,q){if(!D.R)return!1;var m=W.tc(w),z=M.ma(n);if(z&&z.HALF_FLOAT_OES&&b(G,z.HALF_FLOAT_OES,m,J)||n.HALF_FLOAT&&b(G,n.HALF_FLOAT,m,J))return p=t.ba,!0;m=new Float32Array(w);if(b(G,n.FLOAT,m,J))return p=t.ba,!0;n.bindTexture(n.TEXTURE_2D,q);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,2,2,0,n.RGBA,n.UNSIGNED_BYTE,null);n.bindFramebuffer(e.la,I);W.Bb(n,q,2,2,m,!1,!1);n.bindFramebuffer(e.la,null);n.bindTexture(n.TEXTURE_2D,q);return b(G,null,null,J)?(p=t.ba,!0):!1}function g(G,J,q){x=!0;if(l(G,!0,q)||d(J,!0))return!0;
x=!1;return l(G,!1,q)||d(J,!1)?!0:!1}function r(G){if(p===t.H){n=G||a;p=t.RGBA8;x=!0;M.ub(n);D||(D=M.Ha(n));Q.reset();I=n.createFramebuffer();e.la=n.DRAW_FRAMEBUFFER||n.FRAMEBUFFER;n.bindFramebuffer(e.la,null);n.clearColor(0,0,0,0);n.viewport(0,0,2,2);E.H();R=E.fa(n);G=n.createTexture();n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,G);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,
n.NEAREST);H=G;var J=G=n.RGBA,q=n.RGBA16F,m=n.RGBA32F;m&&(G=m);q&&(J=q);if((q||m)&&g(J,G,H))return h(),!0;G=J=n.RGBA;if(g(J,G,H))return h(),!0;p=t.RGBA8;h();return!1}}function h(){n.deleteProgram(R.X);n.deleteTexture(H);H=R=null}for(var t={H:-1,jb:3,ba:2,RGBA8:0},p=t.H,e={Ub:null,Kb:null,la:null},x=!0,y=new Uint8Array(16),w=Array(64),c=0;4>c;++c)for(var u=0;4>u;++u){var A=0===(u+c)%2?1:0,F=4*c+u;w[4*F]=A;w[4*F+1]=A;w[4*F+2]=A;w[4*F+3]=A}var n=null,D=null,R=null,H=null,I=null;return{qc:function(G){r(G);
return x},ob:function(G,J){p===t.H&&(typeof("undefined"!==J)&&(D=J),r(G));return p!==t.RGBA8},te:function(G){r(G);return p===t.jb},$c:function(G){r(G);return p===t.ba},ge:function(G){r(G);return e.Ub},Kc:function(G){r(G);return e.Kb},m:function(){n=null;x=!0;p=t.H;D=null}}}(),Ka={instance:function(b){var d=W.instance(b.alpha),l=W.instance(b.beta);return{Cc:function(){d.g(1);l.g(2)}}}},Ma={instance:function(b){var d=null,l=!1,g=!1,r=null,h=!1,t=!1,p=null,e="undefined"===typeof b.preprocessing?!1:b.preprocessing,
x="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(l=!0,X&&void 0!==X.kc&&(b.mask=X.kc+b.mask),d=W.instance({isFloat:!1,url:b.mask}));var y=!1;b.customInputShader&&(y="s44",E.kb({name:"_",id:y,h:b.customInputShader,Ie:["uSource"],precision:"lowp"}),E.M(y,[{type:"1i",name:"_",value:0}]));switch(e){case "sobel":p="s31";h=!0;break;case "meanNormalization":p="s32";h=!0;break;case "grayScale":p="s28";h=!1;break;case "grayScaleTilt":p="s29";t=!0;h=!1;break;case "rgbGrayTilt":p=
"s30";t=!0;h=!1;break;case "copy":p=y?y:"s0";break;case "inputLightRegulation":p=y?y:"s28";r=La.instance({Jb:x,Tb:b.size,Rb:b.nBlurPass,Zc:!1});g=!0;break;case "direct":case "none":p=!1;break;default:p="s3"}t&&E.M(p,[{name:"u26",type:"1f",value:b.tilt}]);l&&(p+="Mask");var w=W.instance({isFloat:!1,isPot:!1,width:b.size}),c={C:function(){return x},La:function(){return c.C()},Nc:function(){return g?r.Gb():w},G:function(){Q.V();p&&(E.set(p),h&&E.L("u27",1/b.size),w.K(),l&&d.g(1),T.l(!1,!1),w.g(0),g&&
r.process(w))},m:function(){w.remove();l&&d.remove()}};return c}},Sa={instance:function(b){"undefined"===typeof b.normalize&&(b.normalize=!1);var d={input:null,ka:null,Pa:null,J:null,ta:null,Va:null,Wa:null},l=null,g=[],r=[],h=!1,t=null,p=!0,e=-1,x=b.isReorganize?b.isReorganize:!1,y=b.kernelsCount?!0:!1,w=b.dynPelu?Ka.instance(b.dynPelu):!1,c=w?!0:!1,u={isEnabled:!1};b.Xc?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.va.La(),p=!1):"full"===b.connectivityUp&&(b.sparsity=b.va.La());var A=
{elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],F=b.sparsity*b.sparsity,n=!1,D=b.size,R="";if(b.maxPooling){switch(b.maxPooling.size){case 2:R="s33";break;case 4:R="s34"}n=!0;D/=b.maxPooling.size;d.Va=W.instance({isFloat:!0,isPot:!1,width:D})}var H=void 0!==b.ed&&b.ed?!0:!1,I=null,G=null,J=null;if(H){I="s45"+b.index.toString();E.Ib("s45",I,[((b.normalization.n-1)/2).toFixed(1)]);E.M(I,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",
value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var q={isFloat:!0,isPot:!0,width:b.size};G=W.instance(q);J=W.instance(q)}var m=-1,z=null;p&&(d.J=W.instance({isFloat:!0,isPot:!1,width:b.size}));d.ka=W.instance(b.bias);var L={C:function(){return b.size},La:function(){return D},Eb:function(){return b.classesCount},mc:function(C){l.g(C)},jd:function(){b.remap&&b.remap.isEnabled&&
(u={isEnabled:!0,cd:W.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),ra:b.remap.layers.map(function(C){return b.parent.Mc(C)}),depth:b.remap.depth})},vd:function(){switch(b.connectivityUp){case "direct":z=Na.instance(b.connectivity);break;case "square":z=Oa.instance(b.connectivity);break;case "squareFast":z=Pa.instance(b.connectivity,b.activation);break;case "full":z=Qa.instance(b.connectivity);break;case "conv":e=b.kernelsCount,
z=Ra.instance(b.connectivity),x&&(d.ta=W.instance({width:D,isFloat:!0,isFlipY:!1,isPot:!1}))}if(z.$){var C=b.size*b.sparsity;m=Math.log(C/b.size)/Math.log(2);d.input=W.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:C,Sa:m});d.Pa=W.instance({isFloat:!0,isPot:!0,width:b.size})}},G:function(C){l=C;z.$?(d.input.K(),y&&d.ka.g(2),z.G(u),d.input.g(0),d.input.Fc(m),d.Pa.K(),y?E.set("s0"):(E.set("s27"),E.L("u25",F),d.ka.g(1)),d.input.nc(m,0),T.l(!1,!1),E.set(A),H?G.s():d.J.s(),d.Pa.g(0),c&&w.Cc(),T.l(!1,
!1)):(d.J.K(),d.ka.g(1),z.G());H&&(E.set(I),J.s(),G.g(0),T.l(!1,!1),E.set("s46"),E.L("u6",1),d.J.s(),J.g(1),T.l(!1,!1));if(p)return n?(d.Va.K(),d.J.g(0),E.set(R),E.ga("u7",1/b.size,1/b.size),T.l(!1,!1),C=d.Va):C=d.J,C.g(0),x&&(d.ta.s(),E.set("s21"),E.ga("u12",e,D/e),T.l(!1,!1),C=d.ta,d.ta.g(0)),C;C=d.J;b.normalize&&(E.set("gpuRawAvg"===h?"s8":"s7"),E.L("u4",1/b.size),d.Wa.K(),d.J.g(0),T.l(!1,!1),C=d.Wa);switch(h){case "cpuRGBA2Float":C.tb(!1);C=L.ld(C);t(C);break;case "cpuMeanFloat":C.tb(!0);C=C.md();
t(C);break;case "gpuRawAvg":case "gpuRaw":C.g(0);case "none":null!==t&&t(C)}return!1},uc:function(C){C&&(h=C.Xa||"none",t=C.Ua||null);d.J=W.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});C="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var k=0,K=0,v=0;k<C;++k)g.push(K+(b.size-1-v)*b.size),r.push([-1,-1,-1,-1]),++K,K===b.size&&(K=0,++v);b.normalize&&(d.Wa=W.instance({isFloat:!0,isPot:!0,width:b.size}))},ld:function(C){var k=C.Wb();g.forEach(function(K,
v){r[v][0]=k[0][K];r[v][1]=k[1][K];r[v][2]=k[2][K];r[v][3]=k[3][K]});return r},m:function(){for(var C in d){var k=d[C];k&&k.remove()}z&&(z.m(),z=null)}};b.va&&L.vd(b.va);return L}};
function Ta(b){var d=null,l=null,g=0;this.u=function(r){this.td(r.ra);l.uc({Xa:r.Xa,Ua:r.Ua})};this.Mc=function(r){return d[r]};this.td=function(r){var h=null;g=r.length;d=r.map(function(t,p){t=Object.assign({},t,{index:p,parent:this,va:h,Xc:p===g-1});return h=p=0===p?Ma.instance(t):Sa.instance(t)});l=d[g-1];d.forEach(function(t,p){0!==p&&t.jd()})};this.G=function(r,h){var t=h;d.forEach(function(p){t=p.G(t,r)});return t};this.Gb=function(){return l.Nc()};this.Eb=function(){return l.Eb()};this.m=function(){d&&
(d.forEach(function(r){r.m()}),l=d=null,g=0)};"undefined"!==typeof b&&this.u(b)}
var Na={instance:function(b){var d=W.instance(b.weights);return{$:!0,oa:function(){return 1},m:function(){d.remove()},Oc:function(){return d},G:function(){E.set("s26");d.g(1);T.l(!1,!1)}}}},Qa={instance:function(b){var d=b.fromLayerSize,l=W.instance(b.weights);return{$:!0,oa:function(){return d},m:function(){l.remove()},G:function(g){if(g.isEnabled){E.set("s24");g.cd.g(3);var r,h=Math.min(g.ra.length,g.depth);for(r=0;r<h;++r)g.ra[r].mc(4+r)}else E.set("s23");E.L("u16",b.toLayerSize);l.g(1);T.l(!1,
!1)}}}},Oa={instance:function(b){for(var d=b.fromLayerSize,l=b.toLayerSize,g=b.toSparsity,r=g*l,h=r/d,t=d/l,p=0,e=0,x=0,y=Array(g*l*g*l*4),w=Array(g*l*g*l*4),c=Array(d*d),u=0;u<c.length;++u)c[u]=0;u=Math.floor(g/2);for(var A=.5/l,F=.5/d,n=.5/r,D=0;D<l;++D)for(var R=Math.round(D*t),H=0;H<l;++H){var I=Math.round(H*t),G=D/l,J=H/l;G+=A;J+=A;for(var q=0;q<g;++q){var m=R+q-u;0>m&&(m+=d);m>=d&&(m-=d);for(var z=0;z<g;++z){var L=p/r,C=e/r,k=I+z-u;0>k&&(k+=d);k>=d&&(k-=d);var K=m/d,v=k/d;C=1-C-1/r;K+=F;v+=
F;L+=n;C+=n;var f=D*g+q,U=H*g+z;U=l*g-U-1;f=U*l*g+f;y[4*f]=L;y[4*f+1]=C;y[4*f+2]=K;y[4*f+3]=v;v=c[k*d+m]++;f=v%h;K=m*h+f;k=k*h+(v-f)/h;k=d*h-1-k;k=k*d*h+K;w[4*k]=L;w[4*k+1]=C;w[4*k+2]=G;w[4*k+3]=J;++p>=r&&(p=0,++e);++x}}}c=null;var ca=W.instance(b.weights);delete b.weights.data;var ma=W.instance({width:r,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;var da=W.instance({width:r,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{$:!0,oa:function(){return h},m:function(){ma.remove();
da.remove();ca.remove()},G:function(){E.set("s22");ca.g(1);da.g(2);T.l(!1,!1)}}}},Ra={instance:function(b){var d=b.kernelsCount,l=b.toSparsity,g=l*b.toLayerSize/b.fromLayerSize,r=W.instance(b.weights);return{$:!0,oa:function(){return g},me:function(){return l},Oc:function(){return r},m:function(){r.remove()},G:function(){E.set("s25");E.L("u22",d);E.L("u23",l);E.L("u16",b.toLayerSize);E.L("u24",b.fromLayerSize);r.g(1);T.l(!1,!1)}}}},Pa={instance:function(b,d){var l=b.fromLayerSize,g=b.toLayerSize,
r=b.toSparsity,h=b.stride?b.stride:1,t=r*g/l,p=g<l,e=l/g,x=W.instance(b.weights),y="s47"+[l.toString(),g.toString(),r.toString(),h.toString(),d].join("_");E.Ec(y)||(b=la(d),g=[{type:"1f",name:"u16",value:g},{type:"1f",name:"u30",value:h}],p&&g.push({type:"1f",name:"u24",value:l}),l=[(p?t:r).toFixed(1),b],p&&l.push(e.toFixed(1)),E.Ib(p?"s39":"s38",y,l),E.M(y,g.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{$:!1,oa:function(){return t},
m:function(){x.remove()},G:function(){E.set(y);x.g(3);T.l(!1,!1)}}}},La={instance:function(b){var d=b.Rb?b.Rb:3,l=b.Jb?b.Jb:64,g=b.Tb?b.Tb:64,r=b.Zc?!0:!1;b={isFloat:!1,width:l,isPot:!1,isFlipY:!1};var h=W.instance(b),t=W.instance(b),p=W.instance(b),e=W.instance(b),x=W.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),y=1/l;return{process:function(w){E.set("s35");e.s();T.l(r,!1);E.set("s36");for(var c=0;c<d;++c)h.s(),E.ga("u7",y,0),T.l(r,!1),p.s(),e.g(0),T.l(r,!1),t.s(),h.g(0),E.ga("u7",0,y),T.l(r,
!1),e.s(),p.g(0),T.l(r,!1),c!==d-1&&t.g(0);E.set("s37");x.s();w.g(0);t.g(1);e.g(2);T.l(r,!1);x.g(0)},Gb:function(){return x}}}};function Ua(b,d){b[d]=!0;b.setAttribute(d,"true")}function Wa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Xa(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}
function Ya(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Za(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function $a(b){if(!b)return b;var d=null;if(b.video){var l=function(g){return g&&"object"===typeof g?Object.assign({},g):g};d={};"undefined"!==typeof b.video.width&&(d.width=l(b.video.width));"undefined"!==typeof b.video.height&&(d.height=l(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=l(b.video.facingMode))}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);return d}
function ab(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function bb(b){function d(c){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(u,A){return Math.abs(u-c)-Math.abs(A-c)})}function l(c){var u=$a(b);c=c(u);r.push(c);g(c)}function g(c){if(c.video&&c.video.facingMode&&c.video.facingMode.exact){var u=c.video.facingMode.exact;c=$a(c);delete c.video.facingMode.exact;c.video.facingMode.ideal=u;r.push(c)}}var r=[];if(!b||!b.video)return r;g(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var h=
d(b.video.width.ideal).slice(0,3),t=d(b.video.height.ideal).slice(0,3),p={},e=0;for(p.U=void 0;e<h.length;p={U:p.U},++e){p.U=h[e];var x={},y=0;for(x.T=void 0;y<t.length;x={T:x.T},++y)if(x.T=t[y],p.U!==b.video.width.ideal||x.T!==b.video.height.ideal){var w=Math.max(p.U,x.T)/Math.min(p.U,x.T);w<4/3-.1||w>16/9+.1||l(function(c,u){return function(A){A.video.width.ideal=c.U;A.video.height.ideal=u.T;return A}}(p,x))}}}l(function(c){return ab(c)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&
l(function(c){delete c.video.width.ideal;delete c.video.height.ideal;return c}),l(function(c){delete c.video.width;delete c.video.height;return c}));b.video.facingMode&&(l(function(c){delete c.video.facingMode;return c}),b.video.width&&b.video.height&&l(function(c){ab(c);delete c.video.facingMode;return c}));r.push({audio:b.audio,video:!0});return r}
function cb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var l=b.video.height;d&&l&&d.ideal&&l.ideal&&d.ideal>l.ideal&&(b.video.height=d,b.video.width=l)}}
function db(b){b.volume=0;Ua(b,"muted");if(Ya()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Ua(b,"muted")},5)}}
function eb(b,d,l){return new Promise(function(g,r){if(b.srcObject&&b.srcObject.getVideoTracks){var h=b.srcObject.getVideoTracks();1!==h.length?r("INVALID_TRACKNUMBER"):(h=h[0],d?fb(b,g,r,l):(h.stop(),g()))}else r("BAD_IMPLEMENTATION")})}
function gb(b,d,l,g){function r(t){h||(h=!0,l(t))}var h=!1;navigator.mediaDevices.getUserMedia(g).then(function(t){function p(){setTimeout(function(){if(b.currentTime){var e=b.videoWidth,x=b.videoHeight;if(0===e||0===x)r("VIDEO_NULLSIZE");else{e&&(b.style.width=e.toString()+"px");x&&(b.style.height=x.toString()+"px");e={sc:null,Dd:null,dd:null};try{var y=t.getVideoTracks()[0];y&&(e.dd=y,e.sc=y.getCapabilities(),e.Dd=y.getSettings())}catch(w){}Ya()||Wa()?b.parentNode&&null!==b.parentNode?(h||d(b,t,
e),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),db(b),h||d(b,t,e),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";db(b);setTimeout(function(){b.play()},100)},80)):h||d(b,t,e)}}else r("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=t:(b.src=window.URL.createObjectURL(t),b.videoStream=t);db(b);b.addEventListener("loadeddata",function(){var e=b.play();db(b);"undefined"===typeof e?
p():e.then(function(){p()}).catch(function(){r("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(t){r(t)})}
function fb(b,d,l,g){if(b)if(Za()){if(g&&g.video){if(Wa()){var r=Xa();0!==r[0]&&(12>r[0]||12===r[0]&&2>r[1])&&cb(g)}g.video.width&&g.video.width.ideal&&(b.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(b.style.height=g.video.height.ideal+"px")}Ua(b,"autoplay");Ua(b,"playsinline");g&&g.audio?b.volume=0:Ua(b,"muted");gb(b,d,function(){function h(p){if(0===p.length)l("INVALID_FALLBACKCONSTRAINTS");else{var e=p.shift();gb(b,d,function(){h(p)},e)}}var t=bb(g);h(t)},g)}else l&&
l("MEDIASTREAMAPI_NOTFOUND");else l&&l("VIDEO_NOTPROVIDED")}
var hb=function(){var b={Sb:4,ua:[1.5,1.5,2],N:[.1,.1,.1],Xb:1,hb:-1,Ma:-1,Fd:2,hd:1,Yb:!0,Dc:.8},d=null,l=[],g=0,r=[.5,.5,1];return{u:function(h){d=Object.assign({},b,h);l.splice(0);h=d.ua[0]*d.N[0];var t=d.ua[1]*d.N[1],p=1/(1+d.ua[2]*d.N[2]),e=d.Xb*Math.min(d.hb,d.Ma),x=e/d.hb;e/=d.Ma;var y=.5*d.Dc;y*=y;for(var w=0;w<d.Sb;++w){var c=Math.pow(p,w),u=x*c,A=e*c;c=u*h;var F=A*t,n=u/2;A/=2;for(var D=1+(1-n-n)/c,R=1+(1-A-A)/F,H=0;H<R;++H)for(var I=A+H*F,G=I-.5,J=0;J<D;++J){var q=n+J*c,m=q-.5;m*m+G*G>
y||l.push([q,I,u*d.hd])}}d.Yb&&l.sort(function(z,L){var C=z[0]-.5;z=z[1]-.5;var k=L[0]-.5;L=L[1]-.5;return C*C+z*z-(k*k+L*L)})},get:function(){var h=l.length;if(0===h)return r;g>=h&&(g=0);var t=l[Math.floor(g)];g=(g+1/d.Fd)%h;return t}}}(),X={neuralNetworkPath:"NNC.json",jc:10,Rc:64,width:400,height:400,qd:[1,1,2],pd:2,rd:.7,N:[.2,.2,.3],Hd:55,od:[.1,1.1],fc:1,Ed:.9,kd:100,Z:[.2,.8],ac:.1,sd:.55,yc:1,Ld:20,wc:!0};
function ib(b){function d(){++z;1===z&&(jb.ready=!0,b.pc(!1,{video:D.element,GL:a,videoTexture:D.aa.get(),videoTextureCut:n.ea.get()}),I!==H.pause&&(g(),I=H.play,r(0)),z=0)}function l(v){m=setTimeout(r.bind(null,v),c)}function g(){q&&(window.cancelAnimationFrame(q),q=null);m&&(window.clearTimeout(m),m=null)}function r(){I!==H.pause&&(X.wc?t().then(function(){h();e()}):(h(),t().then(e)))}function h(){Q.reset();Q.V();var v=D.element.currentTime-k;0>v&&(k=D.element.currentTime);1E3*v<X.Ld||(D.aa.refresh(),
k+=v,E.set("s50"),D.Aa.K(),D.aa.g(0),T.l(!1,!0));for(v=0;v<X.fc;++v)E.set("s51"),n.ea.K(),D.Aa.g(0),n.ha.g(1),T.l(!1,!1),n.ea.g(0),A.G(!1,n.ea)}function t(){var v=Date.now();if(v-u<X.kd)return Promise.resolve();u=v;E.set("s1");Q.F();a.viewport(0,0,1,1);n.Ta.g(0);T.l(!1,!1);return Ca.nd(0,0,1,1,R).then(p)}function p(){var v=X.Z[0]+C*(X.Z[1]-X.Z[0]),f=Math.abs(R[1]/255*2-1),U=128<R[0],ca=U&&f<v+X.ac;v=U&&f<v-X.ac;I===H.play&&v?(b.nb(!0),I=H.Ga):I!==H.Ga||ca||(b.nb(!1),I=H.play)}function e(){J===G.visible&&
(Q.Jd(),E.set("s49"),D.Aa.g(1),n.ha.g(0),T.l(!1,!1));a.flush();q=window.requestAnimationFrame(l)}function x(){n.ha.xd(1);E.set("s52");E.Ad("u32",hb.get());T.l(!1,!1);E.set("s53");n.Ta.wd(1);n.ha.g(0);T.l(!1,!1)}var y=Math.round(X.width),w=Math.round(X.height),c=X.jc,u=Date.now(),A=null;hb.u({ua:X.qd,Sb:X.pd,hb:y,Ma:w,Xb:X.rd,N:X.N,Yb:!0});var F=[1,y/w],n={ea:null,ha:null,Ta:null,Vd:null},D={element:null,aa:null,Aa:null,Fa:null},R=new Uint8Array([0,0,0,0]),H={fd:-1,bd:0,play:1,Ga:2,pause:3},I=H.bd,
G={hidden:0,visible:1},J=b.Uc?G.visible:G.hidden,q=null,m=null,z=0,L="undefined"!==typeof b.ib?b.ib:"../../",C=(("undefined"!==typeof b.$b?b.$b:X.sd)-X.Z[0])/(X.Z[1]-X.Z[0]),k=0,K={yd:function(v){C=v},Gd:function(v){J=v?G.visible:G.hidden},dc:function(v,f){if(v&&I===H.pause||!v&&I!==H.pause)return Promise.resolve();f=f?eb(D.element,!v,D.Fa):Promise.resolve();v?(I=H.pause,g()):(I=H.Ga,g(),I=H.play,r(0));return f},xc:function(){A&&(A.m(),A=null);Ca.m();I=H.fd},u:function(){D.Fa={video:{facingMode:{ideal:"user"},
width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};fb(Za()?document.createElement("video"):!1,function(v){K.start(v)},function(){errorCallback("NO_WEBCAM")},D.Fa)},start:function(v){D.element=v;K.Qc();K.vc();K.Bd();fa(L+X.neuralNetworkPath,K.ad.bind(null,d))},Qc:function(){E.ic([{id:"s50",name:"_",ia:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u34+u33*a0;}",ja:["a0"],ca:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1","u33","u34"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ia:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;const vec2 f=vec2(.25,.5),g=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u35,f);vec2 d=a.gb,b=a.a*u36;vec4 c=texture2D(u35,g);float l=c.a,i=c.y;vec2 j=vec2(1./cos(i),1.);b*=j;vec2 k=a0*.5+e;vv0=d+(k-e)*b,gl_Position=vec4(a0,0.,1.);}",ja:["a0"],ca:[2],i:["u1","u35","u36"],
precision:"lowp"},{id:"s52",name:"_",ia:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u37,u35;uniform vec3 u32,u38;uniform vec2 u39;uniform float u40,u41;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u35,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 d=texture2D(u37,vec2(.125,.625)),g=texture2D(u37,vec2(.375,.625));bool h=dot(d-g,e)>u41;h?a=2.:a>u40?a=0.:a>1.9&&(b.a>u39.y||b.a<u39.x)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u32,a=1.;else{float i=dot(e,texture2D(u37,vec2(.375,.875))),j=dot(e,texture2D(u37,vec2(.625,.875))),k=dot(e,texture2D(u37,vec2(.875,.875))),l=dot(e,texture2D(u37,vec2(.125,.875)));c=clamp(l,-1.+f,1.-f);float m=step(1.5,a);a*=m;float n=b.a;b.gba+=vec3(i,j,k)*u38*n;}b.r=a+c*.5+.5,gl_FragColor=b;}",
i:"u37 u35 u32 u39 u40 u41 u38".split(" ")},{id:"s53",name:"_",h:"uniform sampler2D u35,u42;uniform float u43;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u35,e),b=texture2D(u42,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u43);}",i:["u35","u42","u43"]},{id:"s49",name:"_",h:"uniform sampler2D u35,u44;uniform vec2 u36;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 f=texture2D(u35,vec2(.5,.5));vec3 l=texture2D(u44,vv0).rgb;vec2 g=f.gb;float m=f.a;vec2 a=m*u36,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 n=.5*(d+c),h=step(d,vv0)*step(vv0,c);float o=h.x*h.y;vec2 b=2.*abs(n-vv0)/a;b=pow(b,3.*j);float i=max(b.x,b.y);i*=o,gl_FragColor=vec4(mix(l,k,i),1.);}",
i:["u35","u44","u36"]}]);E.M("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:F}]);E.M("s53",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u42",value:1},{type:"1f",name:"u43",value:X.Ed}]);E.M("s49",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u44",value:1},{type:"2f",name:"u36",value:F}]);E.M("s52",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u39",value:X.od},{type:"1f",name:"u40",value:X.Hd},{type:"1f",name:"u41",
value:X.yc},{type:"3f",name:"u38",value:[X.N[0]*F[0],X.N[1]*F[1],X.N[2]]}])},vc:function(){D.aa=W.instance({B:D.element,isPot:!1,isFloat:!1,isFlipY:!0});D.Aa=W.instance({isPot:!1,xe:!0,isFloat:!1,width:y,height:w});n.ea=W.instance({isPot:!0,isFloat:!1,width:X.Rc});var v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0])};n.ha=Ja.instance(v);v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])};n.Ta=Ja.instance(v)},Bd:function(){var v=[.5,.5],f=D.element.videoHeight/
D.element.videoWidth,U=Ca.I()/Ca.C();f>U?1>=f?v[0]*=f:v[1]/=f:(v[0]*=f,f=1/U,v[0]*=f,v[1]*=f);v[1]*=U;E.M("s50",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u33",value:v},{type:"2f",name:"u34",value:[.5,.5]}])},ad:function(v,f){f="object"===typeof f?f:JSON.parse(f);A=new Ta({ra:f.layers,Xa:"gpuRawAvg",Ua:x});v&&v()}};return K}
var jb={ready:!1,set_sensibility:function(b){jb.ready&&jb.Y.yd(b)},toggle_pause:function(b,d){return jb.ready?jb.Y.dc(b,d):Promise.reject()},destroy:function(){return new Promise(function(b,d){jb.Y.dc(!0,!0).catch(function(){d()}).finally(function(){jb.Y.xc();b()})})},toggle_display:function(b){jb.ready&&jb.Y.Gd(b)},init:function(b){function d(l){b.callbackReady&&b.callbackReady(l?l:"UNKNOW_ERROR")}jb.Y=ib({Uc:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,pc:function(l,g){b.callbackReady&&
b.callbackReady(l,g)},nb:b.callbackTrack,$b:b.sensibility,ib:b.NNCPath});if(!Ca.u({sb:b.canvasId,width:X.width,height:X.height,debug:!1,Qa:!1,premultipliedAlpha:!0}))return d&&d("COMPAT_FAIL"),!1;E.u();jb.Y.u();return!0}};window.GLANCETRACKERAPI=jb;
;return GLANCETRACKERAPI||window.GLANCETRACKERAPI;})();